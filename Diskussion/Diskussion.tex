\chapter{Diskussion}

In diesem Kapitel werden die Kalkulations-, und die Messungsergebnisse der Performance analysiert und interpretiert. Anschließend wird der Prototyp bewertet und dabei auf die Grenzen des Prototyps eingegangen.
  
\section{Analyse und Interpretation der Ergebnisse}

Basierend auf der Kostenanalyse und den Ergebnissen der Kalkulation ergibt sich, dass die Speicherklassen OneZone-IA von Amazon Web Services (AWS) und Coldline von Google Cloud (GC) die niedrigsten Kosten für die Speicherung von Daten aufweisen. Jedoch sind Datenabrufe in diesen Speicherklassen als kostenintensiv zu betrachten. In der Coldline-Klasse belaufen sich die Kosten für Class A- und Class B-Operationen jeweils auf 4,84 Euro, während bei AWS PUT-Anfragen, die mit Class A gleichzusetzen sind, 2,50 Euro und GET-Anfragen, die mit Class B gleichzusetzen sind, 0,50 Euro betragen. Insgesamt sind die Kosten für die Coldline-Klasse im Vergleich zur OneZone-IA-Klasse jedoch günstiger.\\ 

Die Entscheidung für OneZone-IA als Speicherklasse birgt das Risiko eines erhöhten Datenverlusts, da die Daten nur in einer Verfügbarkeitszone gespeichert werden. Dies steht im Widerspruch zu den Anforderungen von leoticket an eine hohe Verfügbarkeit. Obwohl die Speicherkosten in dieser Klasse am niedrigsten sind, sind die Kosten für Datenabrufe im Vergleich zu anderen Speicherklassen höher. Für leoticket ist es jedoch von Bedeutung, auf Objekte mindestens zweimal zugreifen zu können und sie den Kunden zur Verfügung zu stellen. Bei älteren Daten, die mehrere Jahre zurückliegen, kann es ratsam sein, die Objekte in die OneZone-IA zu verschieben, um Kosten für die Archivierung einzusparen.\\

Die Verfügbarkeit der Coldline-Klasse ähnelt der OneZone-IA-Klasse. Die Datenabrufe in dieser Klasse können mehrere Stunden dauern. Sie ist nicht für Szenarien geeignet, die einen sofortigen Zugriff auf Daten erfordern oder in denen häufiger auf die Daten zugegriffen werden muss. Im Gegensatz zur OneZone-IA ist die Coldline-Klasse jedoch nicht auf eine einzelne Verfügbarkeitszone beschränkt. Da die Kosten für Datenabrufe in dieser Klasse höher sind als in allen anderen Speicherklassen, ist sie nicht geeignet für Daten, auf die mehr als einmal zugegriffen werden muss.\\

Im Rahmen der Performance-Analyse zeigte die OneZone-IA-Klasse eine bessere Leistung als die Coldline-Klasse. Bereits ab dem Upload von 10 Dateien war die OneZone-IA-Klasse deutlich schneller. In diesem Szenario war sie doppelt so schnell wie die Coldline-Klasse. Ab 100 Dateien wurde ein Unterschied von fast 13 Sekunden festgestellt, wobei die Coldline-Klasse etwa 20 Sekunden und die OneZone-IA-Klasse nur etwa 7 Sekunden benötigte. Bei 1000 Dateien bewegten sich beide Speicherklassen im Minutenbereich, wobei auch hier die OneZone-IA-Klasse doppelt so schnell war wie die Coldline-Klasse. Beim Download von Dateien bewegten sich beide Klassen in Millisekunden Bereichen. Ab 1000 Dateien lag die Coldline-Klasse im Sekundenbereich, während die OneZone-IA-Klasse weniger als 1 Sekunde benötigte.\\

Die Speicherklassen Standard-IA und Nearline weisen nur geringfügige Preisunterschiede auf, die sich auf maximal 2 Euro belaufen. Dabei ist Nearline maximal 2 Euro günstiger als Standard-IA. Die Standard-IA eignet sich für seltene Datenabrufe, die jedoch eine schnellere Zugriffszeit erfordern, wenn sie benötigt werden. Die Nearline-Klasse ähnelt der Standard-IA und ist ebenfalls für Daten gedacht, die gelegentlich im Zeitraum von Wochen oder Monaten abgerufen werden. Sie ist ideal für Datensicherung, Datenmigration und Datenarchivierung. Beide Speicherklassen bieten einen Kompromiss zwischen Kosteneinsparungen und Datenzugriffszeiten, wobei die Daten innerhalb einer angemessenen Zeitspanne abgerufen werden müssen.\\

Während der Performance Analyse wurden diese beiden Speicherklassen verglichen, da sie ähnliche Eigenschaften aufweisen. Es stellte sich heraus, dass sich die Dauer des Uploads und Downloads erst ab 10 Dateien zu unterscheiden began. Dabei war die Standard-IA beim Hochladen und Herunterladen der zehn Dateien fast dreimal so schnell wie die Nearline-Klasse. Die Nearline-Klasse schnitt beim Hochladen schlechter ab. Beim Herunterladen von Dateien gab es jedoch nur minimale Unterschiede, wobei sich Nearline bei 1000 Dateien im Sekundenbereich und die Standard-IA unter 1 Sekunde bewegten.\\

Die Standardklassen beider Anbieter weisen kaum Unterschiede bei den PUT- und GET-Anfragen auf. Allerdings sind die Speicherungskosten in der Standardklasse von AWS höher als bei GC. Beide Klassen eignen sich für Daten, auf die häufig zugegriffen wird und die eine hohe Verfügbarkeit, schnelle Zugriffszeiten und geringe Latenzzeiten erfordern. Beide Standardklassen sind für den allgemeinen Gebrauch optimiert, wobei die Speicherungskosten in diesen Klassen im Vergleich zu anderen Speicherklassen am höchsten sind.\\

Bei der Performance-Analyse schnitt die Standardklasse von AWS ab 10 Dateien besser ab als die entsprechende Klasse von GC. Beim Hochladen von Dateien war die AWS-Standardklasse etwa dreimal schneller als die GC-Standardklasse. Beim Herunterladen von Dateien waren die Unterschiede nicht groß genug, um eine eindeutige Aussage über die Überlegenheit einer Klasse zu treffen. Allerdings bewegte sich auch hier die GC-Standardklasse ab 1000 Dateien bereits im Sekundenbereich, während die AWS-Standardklasse im Millisekundenbereich blieb.\\

Es ist anzumerken, dass bei den AWS Kosten auch die Vorauszahlung der Speicherung aller Objekte beinhalten. Bei GC gibt es hingegen keine Vorauszahlung für die Speicherung von Objekten. Dadurch und auch durch die niedrigeren Gebühren der Speicherung ist Google Cloud die kostengünstigere Option für die Datenspeicherung. Insgesamt war die Dauer des Uploads und Downloads der Speicherklassen von AWS in der Performance-Analyse höher als bei GC. Ab 10 Dateien traten bereits erste Unterschiede auf, wobei AWS bessere Ergebnisse erzielt hat. Die Performance-Messungen basieren jedoch lediglich auf groben Schätzungen innerhalb einer virtuellen Umgebung. Faktoren wie die Auslastung des Netzwerks können die Ergebnisse beeinflussen und stellen keine aussagekräftigen Performance-Ergebnisse dar.\\

\section{Bewertung des Prototyps}

Für die Bewertung des Prototyps wurden die Anforderungen von leoticket herangezogen. Dabei war es wichtig, den Prototypen so zu bauen, dass die sichere Speicherung gedeckt war. Für die Deckung der sicheren Speicherung wurden verschiedene Methoden betrachtet, die beide Cloud Provider anboten. Dabei implementiert der Prototyp die SSE-KMS Methode beider Provider. Durch die eigene Erstellung des Schlüssels in der KMS von AWS und GC hat der Nutzer mehr Kontrolle, indem die Schlüssel vom Nutzer erstellt werden. Der Schlüssel wird vom KMS gespeichert und muss daher nicht vom Nutzer extern gespeichert und verwaltet werden. Der Prototyp kann jedoch so umgebaut werden, sodass auch eine andere Methode wie die SSE-C verwendet werden kann. Die SSE-C bietet eine höhere Sicherheit, da der Nutzer den Schüssel selber generieren und speichern muss. Dies führt auch zum Risiko, den Schlüssel zu verlieren, wenn man ihn verliert. In diesem Fall können auf die Objekte im Bucket nicht mehr zugegriffen werden ohne Schlüssel. Noch ein Kriterium von leoticket war die hohe Verfügbarkeit der Daten. Der Prototyp wurde so gebaut, dass der Nutzer die Speicherklasse für AWS selbst entscheiden kann. In GC funktioniert das, indem das Bucket die richtige Speicherklasse bereits eingestellt hat. Für die Verfügbarkeit sind jedoch die Cloud Provider verantwortlich. Hier versprechen beide Provider eine Verfügbarkeit von mindestens 99.5\%. Diese Verfügbarkeit hängt von den verschiedenen Speicherklassen ab. Über Terraform werden Buckets automatisch mit den Einstellungen konform zu den Anforderungen von leoticket erstellt. Dies beinhalten die Konfigurationen von:

\begin{itemize}
	\item Object Versioning
	\item Lifecycle Rules
	\item Object Ownership
	\item Data Encryption
	\item Object Logging
	\item Bucket ACL
	\item Public Access Block
\end{itemize}

Die Object Versioning dient zur Steigerung der Verfügbarkeit, falls Daten unerwünscht gelöscht oder überschrieben werden. Für die Anforderung der Integration in Software-Produkten wie leoticket sorgen die SDKs der beiden Provider. Die SDKs unterstützen verschiedene Programmiersprachen. Sie werden auch als Maven Dependency in einer Spring Boot Applikation unterstützt und auch außerhalb Spring Boot. Die Anbindung verläuft in einfachen Schritten durch Befolgen der offiziellen Dokumentation der beiden Cloud Providern. Die Dokumentationen sind gepflegt und sorgen für die Bereitstellung der nötigen Informationen, um Dateien nach Buckets hoch-, und herunterzuladen. AWS und GC bieten auch neue Versionen an und updaten die SDKs. Die Generierung der signierten URLs sind für die Bereitstellung der Dateien zuständig. Diese Anforderung war das Hauptmerkmal von leoticket. Dabei ist es bei beiden Providern möglich signierte zeitlich begrenzte URLs zu generieren und diese Nutzern bereitzustellen, ohne ein AWS oder GC Konto zu haben. Besitzer der URL können so ihre Tickets und Rechnungen herunterladen. Um die Methoden des Prototyps zu testen, werden Tests bereitgestellt, die Buckets mocken und so Dateien hoch-, und herunterladen können. Für die Performance Analyse wird eine Methode zur Verfügung gestellt, die Testdateien in Größe von 100kb erstellen und in Buckets hoch-, und herunterladen können.\\

Insgesamt ist der Prototyp ausbaufähig und stellt für diese Arbeit einen Handson dar. Für den besseren Vergleich der beiden Cloud Provider wurden die Technologien ausprobiert und umgesetzt. Durch Änderungen an der Konfiguration in Terraform, die Speicherklassen Variable für AWS und an der Methode der Datenverschlüsselung kann der Prototyp nach Wünschen angepasst werden. Die Schwächend es Prototyps besteht darin, dass keine genauen Performance Messungen durchgeführt werden können. Es dient lediglich des groben Vergleichs. Eine weitere Schwäche des Prototyps besteht darin, dass Entwickler bei der Integration des Prototyps in eigene Anwendungen Anpassungen durchführen müssen, indem die Hauptklasse des Prototyps so umgebaut werden muss, dass das gewünschte Verhalten läuft.












